/* === BASIC RESET và BODY STYLES (giữ nguyên như trước) === */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Be Vietnam Pro", sans-serif;
  line-height: 1.6;
  color: #333;
  background-color: #ffffff;
}

.container {
  width: 90%; /* Giữ nguyên hoặc có thể tăng lên 95% nếu muốn nội dung gần sát mép hơn */
  max-width: 1280px; /* Tăng max-width để header có không gian rộng hơn nếu cần */
  margin-left: auto;
  margin-right: auto;
  padding-left: 15px;
  padding-right: 15px;
}

/* ====================
   HEADER STYLES - TĂNG KÍCH THƯỚC
   ==================== */

header {
  padding: 20px 0; /* Tăng padding trên dưới cho header cao hơn một chút */
  background-color: #ffffff;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08); /* Tăng nhẹ bóng đổ */
  border-bottom: 1px solid #e0e0e0;
}

.header-content {
  display: flex;
  align-items: center;
}

/* 1. Logo Area (Bên trái) */
.logo-area {
  display: flex;
  align-items: center;
  text-decoration: none;
  flex-shrink: 0;
}

.logo-img {
  height: 36px; /* TĂNG: Chiều cao logo (ví dụ: từ 28px lên 36px) */
  margin-right: 12px; /* TĂNG: Khoảng cách giữa ảnh và text logo */
}

.logo-text {
  font-size: 24px; /* TĂNG: Kích thước chữ CLINIPREP (ví dụ: từ 19px lên 24px) */
  font-weight: 700;
  color: #1a293b;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

/* 2. Main Navigation (Ở giữa, lệch trái) */
.main-nav {
  background: linear-gradient(90deg, #5960dc, #cfa4f4 60%, #ff99ff);
  border-radius: 50px;
  padding: 7px 10px; /* TĂNG: Padding bên trong thanh nav */
  box-shadow: 0 2px 8px rgba(100, 100, 100, 0.1);
  margin-left: 60px; /* TĂNG: Khoảng cách từ logo đến thanh nav, điều chỉnh cho phù hợp */
  /* (Cần tăng vì logo cũng to ra) */
}

.main-nav ul {
  display: flex;
  align-items: center;
  list-style: none;
  padding: 0;
  margin: 0;
}

.main-nav .nav-link {
  display: block;
  padding: 9px 18px; /* TĂNG: Padding cho từng mục nav */
  margin: 0 3px; /* TĂNG nhẹ: Khoảng cách giữa các mục nav */
  font-weight: 500; /* Giữ nguyên hoặc 600 nếu muốn đậm hơn */
  font-size: 15px; /* TĂNG: Kích thước chữ cho nav items (ví dụ: từ 13px lên 15px) */
  color: #ffffff;
  text-decoration: none;
  border-radius: 30px;
  transition: background-color 0.2s ease;
  white-space: nowrap;
}

.main-nav .nav-link.active,
.main-nav .nav-link:hover {
  background-color: rgba(255, 255, 255, 0.25);
}
.main-nav .nav-link.active {
  background-color: rgba(255, 255, 255, 0.35);
}

/* 3. Auth Buttons (Bên phải) */
.auth-buttons {
  margin-left: auto;
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.auth-buttons .btn-auth {
  display: inline-block;
  padding: 9px 20px; /* TĂNG: Padding cho nút */
  border-radius: 25px; /* TĂNG nhẹ bo tròn */
  font-weight: 500; /* Giữ nguyên hoặc 600 */
  font-size: 15px; /* TĂNG: Kích thước chữ cho nút (ví dụ: từ 13px lên 15px) */
  text-decoration: none;
  transition: background-color 0.2s ease, color 0.2s ease,
    border-color 0.2s ease;
  white-space: nowrap;
  cursor: pointer;
  background-color: #f0f4f8;
  color: #3b4a5c;
  border: 1px solid #d8dde3;
}

.auth-buttons .btn-auth:first-child {
  margin-right: 12px; /* TĂNG: Khoảng cách giữa nút Đăng ký và Đăng nhập */
}

.auth-buttons .btn-auth:hover {
  background-color: #e2e8f0;
  color: #2c3e50;
  border-color: #caced4;
}

/* ====================
   FOOTER STYLES (Giữ nguyên hoặc điều chỉnh nếu cần)
   ==================== */
footer {
  background-color: #485461;
  color: #e0e6eb;
  padding: 18px 0;
  text-align: center;
  font-size: 13px;
}
/* Giữ nguyên các phần CSS khác từ trước */

/* ============================
   HERO SECTION STYLES
   ============================ */

.hero-section {
  padding: 60px 0;
  position: relative;
  overflow: hidden;
  background-color: #f4f7fc; /* Hoặc #ffffff nếu bạn muốn nền trắng hoàn toàn */
}

.hero-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 30px;
}

.hero-text {
  flex-basis: 55%;
  max-width: 55%;
  position: relative;
  z-index: 2;
}

.hero-text h1 {
  font-size: 48px; /* Điều chỉnh nếu cần */
  font-family: "Be Vietnam Pro", sans-serif;
  font-weight: 800; /* Hoặc 700 tùy thiết kế */
  color: #1f2374; /* Màu cho chữ "NỀN TẢNG" */
  line-height: 1.3;
  margin-bottom: 30px;
}

.hero-text h1 .highlight {
  color: #c4459f; /* Màu cho chữ "MÔ PHỎNG THỰC HÀNH LÂM SÀNG" */
}

.btn-explore {
  display: inline-flex;
  align-items: center;
  padding: 14px 30px;
  background-color: #4a55a2; /* GIỮ NGUYÊN hoặc cập nhật theo màu nút từ Canva */
  color: #ffffff;
  font-size: 16px;
  font-weight: 700;
  text-decoration: none;
  border-radius: 50px;
  transition: background-color 0.3s ease, transform 0.2s ease;
  box-shadow: 0 4px 15px rgba(74, 85, 162, 0.3); /* GIỮ NGUYÊN hoặc cập nhật */
}

.btn-explore:hover {
  background-color: #3a4380; /* GIỮ NGUYÊN hoặc cập nhật */
  transform: translateY(-2px);
}

.btn-explore .icon-search {
  width: 18px;
  height: 18px;
  margin-left: 10px;
}

.hero-image {
  flex-basis: 40%;
  max-width: 40%;
  text-align: center;
  position: relative;
  z-index: 1;
}

.hero-image img {
  max-width: 100%;
  height: auto;
}

.hero-background-effect {
  position: absolute;
  top: 0;
  left: 0;
  width: 60%;
  height: 100%;
  background: linear-gradient(
    135deg,
    rgba(100, 120, 220, 0.15) 0%,
    rgba(200, 150, 230, 0.05) 100%
  ); /* GIỮ NGUYÊN hoặc cập nhật */
  border-top-right-radius: 200px;
  border-bottom-right-radius: 200px;
  z-index: 0;
}

/* ====================
     FOOTER STYLES (Giữ nguyên)
     ==================== */
/* ... */
/* ============================
   AUTH PAGE STYLES (Đăng ký, Đăng nhập)
   ============================ */

.auth-section {
  display: flex;
  align-items: center; /* Căn giữa theo chiều dọc */
  justify-content: center; /* Căn giữa theo chiều ngang */
  min-height: calc(
    100vh - 160px
  ); /* Chiều cao tối thiểu để form ở giữa (100vh trừ chiều cao header + footer ước lượng) */
  /* Bạn cần điều chỉnh 160px cho chính xác */
  padding: 40px 0;
  background-color: #eef2f7; /* Màu nền nhạt cho trang auth (LẤY TỪ CANVA) */
}

.auth-container {
  display: flex;
  background-color: #ffffff; /* Nền trắng cho box chính */
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  overflow: hidden; /* Để bo góc hoạt động đúng với các thành phần con */
  max-width: 900px; /* Giới hạn chiều rộng của box */
  width: 100%;
}

.auth-image-side {
  flex-basis: 45%; /* Phần bên trái chiếm 45% */
  padding: 40px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  /* Thêm gradient background nếu có trong thiết kế của bạn cho phần này */
  background: linear-gradient(
    135deg,
    rgba(91, 105, 223, 0.1),
    rgba(227, 233, 248, 0.3)
  ); /* Gradient nhạt ví dụ */
}

.auth-branding .auth-logo {
  height: 40px; /* Kích thước logo */
  margin-bottom: 20px;
}

.auth-branding h2 {
  font-size: 18px;
  font-weight: 700;
  color: #1f2374; /* Màu chữ đậm (LẤY TỪ CANVA) */
  margin-bottom: 10px;
  line-height: 1.4;
}

.auth-branding p {
  font-size: 14px;
  color: #555; /* Màu chữ phụ (LẤY TỪ CANVA) */
  line-height: 1.6;
}

.auth-form-side {
  flex-basis: 55%; /* Phần form chiếm 55% */
  padding: 40px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.auth-form-container h3 {
  font-size: 30px;
  font-weight: 700;
  color: #1f2374; /* Màu tiêu đề form (LẤY TỪ CANVA) */
  margin-bottom: 25px;
  text-align: center;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #333;
  margin-bottom: 8px;
}

.form-group input[type="email"],
  .form-group input[type="password"],
  .form-group input[type="text"] /* Thêm text cho các trường khác nếu có */ {
  width: 100%;
  padding: 12px 15px;
  border: 1px solid #ced4da;
  border-radius: 8px;
  font-size: 15px;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-group input[type="email"]:focus,
.form-group input[type="password"]:focus,
.form-group input[type="text"]:focus {
  border-color: #5b69df; /* Màu viền khi focus (LẤY TỪ CANVA) */
  box-shadow: 0 0 0 0.2rem rgba(91, 105, 223, 0.25); /* Hiệu ứng glow khi focus */
  outline: none;
}

.btn-auth-submit {
  width: 100%;
  padding: 12px 20px;
  background-color: #5b69df; /* Màu nút chính (LẤY TỪ CANVA) */
  color: #ffffff;
  font-size: 16px;
  font-weight: 700;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.btn-auth-submit:hover {
  background-color: #4a55c5; /* Màu nút khi hover (đậm hơn) */
}

.auth-switch {
  margin-top: 25px;
  text-align: center;
  font-size: 14px;
}

.auth-switch p {
  color: #555;
}

.auth-switch a {
  color: #5b69df; /* Màu link (LẤY TỪ CANVA) */
  font-weight: 600;
  text-decoration: none;
}

.auth-switch a:hover {
  text-decoration: underline;
}
/* CSS Bổ sung cho form-options trong trang Đăng nhập */
.form-options {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  font-size: 13px;
}

.checkbox-container {
  display: block;
  position: relative;
  padding-left: 25px; /* Không gian cho checkbox tùy chỉnh */
  cursor: pointer;
  user-select: none; /* Ngăn chọn text */
  color: #555;
}

.checkbox-container input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

.checkmark {
  position: absolute;
  top: 0;
  left: 0;
  height: 18px;
  width: 18px;
  background-color: #eee;
  border: 1px solid #ccc;
  border-radius: 3px;
  transition: background-color 0.2s ease;
}

.checkbox-container:hover input ~ .checkmark {
  background-color: #ddd;
}

.checkbox-container input:checked ~ .checkmark {
  background-color: #5b69df; /* Màu checkbox khi được chọn (LẤY TỪ CANVA) */
  border-color: #5b69df;
}

.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}

.checkbox-container input:checked ~ .checkmark:after {
  display: block;
}

.checkbox-container .checkmark:after {
  left: 6px;
  top: 2px;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.forgot-password {
  color: #5b69df; /* Màu link (LẤY TỪ CANVA) */
  text-decoration: none;
}

.forgot-password:hover {
  text-decoration: underline;
}
/* ============================
   HEADER - USER ACTIONS (Đã đăng nhập)
   ============================ */
.user-actions {
  position: relative; /* Cần cho việc định vị dropdown */
}

.btn-user {
  display: inline-flex; /* Để các item con (icon, text, dropdown-icon) nằm trên hàng */
  align-items: center;
  background-color: #f0f4f8; /* Màu nền nút (LẤY TỪ CANVA hoặc để transparent) */
  color: #1e293b; /* Màu chữ (LẤY TỪ CANVA) */
  padding: 8px 12px;
  border: 1px solid #d1d9e6; /* Viền nút (LẤY TỪ CANVA hoặc không viền) */
  border-radius: 25px; /* Bo tròn */
  font-weight: 500;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.2s ease, box-shadow 0.2s ease;
}

.btn-user:hover,
.btn-user.active {
  /* .active khi dropdown mở */
  background-color: #e2e8f0;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.user-avatar-icon {
  width: 24px; /* Kích thước avatar */
  height: 24px;
  border-radius: 50%; /* Bo tròn avatar */
  margin-right: 8px;
  object-fit: cover; /* Đảm bảo ảnh avatar không bị méo */
}

.btn-user .dropdown-icon {
  margin-left: 8px;
  font-size: 12px;
  transition: transform 0.2s ease;
}

.btn-user.active .dropdown-icon {
  transform: rotate(180deg); /* Xoay icon mũi tên khi dropdown mở */
}

/* Dropdown Menu */
.dropdown-menu {
  display: none; /* Mặc định ẩn */
  position: absolute;
  top: calc(100% + 8px); /* Vị trí dưới nút user, có khoảng cách nhỏ */
  right: 0;
  background-color: #ffffff;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  min-width: 180px; /* Chiều rộng tối thiểu của dropdown */
  z-index: 1001; /* Đảm bảo nằm trên các phần tử khác */
  padding: 8px 0; /* Padding trên dưới cho toàn bộ menu */
}

.dropdown-menu.show {
  /* Class 'show' sẽ được thêm bằng JS để hiện dropdown */
  display: block;
}

.dropdown-item {
  display: block;
  padding: 10px 15px;
  font-size: 14px;
  color: #333;
  text-decoration: none;
  white-space: nowrap; /* Không xuống dòng */
  transition: background-color 0.2s ease, color 0.2s ease;
}

.dropdown-item:hover {
  background-color: #f5f5f5;
  color: #111;
}

.dropdown-item.logout-item:hover {
  background-color: #ffebee; /* Màu nền đặc biệt cho nút đăng xuất khi hover (ví dụ màu đỏ nhạt) */
  color: #c62828; /* Màu chữ đặc biệt */
}

.dropdown-divider {
  height: 1px;
  margin: 8px 0;
  overflow: hidden;
  background-color: #e0e0e0;
  border: 0;
}
/* ============================
   DASHBOARD STYLES
   ============================ */

/* --- Welcome Section --- */
.dashboard-welcome {
  padding: 40px 0 20px; /* Ít padding dưới hơn để gần với các card */
  /* background-color: #f8f9fa;  Màu nền nếu cần */
}

.welcome-header h2 {
  font-size: 32px; /* Kích thước chữ (LẤY TỪ CANVA) */
  font-weight: 700;
  color: #1f2374; /* Màu chữ đậm (LẤY TỪ CANVA) */
  margin-bottom: 10px;
}

.welcome-header .user-name-placeholder {
  color: #c4459f; /* Màu cho tên người dùng (LẤY TỪ CANVA) */
}

.welcome-header p {
  font-size: 18px; /* Kích thước chữ (LẤY TỪ CANVA) */
  color: #4a55a2; /* Màu chữ (LẤY TỪ CANVA) */
  font-weight: 500;
}

/* --- Navigation Cards Section --- */
.dashboard-navigation {
  padding: 30px 0 60px;
}

.nav-cards-grid {
  display: grid;
  grid-template-columns: repeat(
    auto-fit,
    minmax(300px, 1fr)
  ); /* Layout responsive cho các card */
  gap: 30px; /* Khoảng cách giữa các card */
}

.nav-card {
  display: flex; /* Để icon mũi tên nằm ở cuối card */
  justify-content: space-between;
  align-items: center;
  background-color: #ffffff;
  border: 1px solid #e0e7ff; /* Viền card (LẤY TỪ CANVA) */
  border-radius: 12px;
  padding: 25px;
  text-decoration: none;
  color: inherit; /* Kế thừa màu chữ từ body/section */
  box-shadow: 0 4px 15px rgba(100, 120, 220, 0.08); /* Đổ bóng nhẹ (LẤY TỪ CANVA) */
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  min-height: 150px; /* Chiều cao tối thiểu cho card */
  /* Thêm một dải màu phía trên hoặc bên trái card nếu thiết kế yêu cầu */
  position: relative;
  overflow: hidden; /* Nếu dùng pseudo-element cho dải màu */
}

.nav-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(100, 120, 220, 0.15);
}

/* Tùy chọn: Dải màu trang trí cho card (ví dụ màu tím từ thiết kế của bạn) */
.nav-card::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 8px; /* Độ rộng của dải màu */
  background: linear-gradient(
    to bottom,
    #6a5acd,
    #9370db
  ); /* Gradient màu tím (LẤY TỪ CANVA) */
  /* Hoặc một màu đơn: background-color: #7b61ff; */
  border-top-left-radius: 11px; /* Phải trừ 1px của border card */
  border-bottom-left-radius: 11px;
}

.nav-card-content {
  flex-grow: 1;
  padding-left: 15px; /* Khoảng cách từ dải màu (nếu có) đến text */
}

.nav-card h3 {
  font-size: 20px; /* Kích thước chữ (LẤY TỪ CANVA) */
  font-weight: 700;
  color: #1f2374; /* Màu chữ (LẤY TỪ CANVA) */
  margin-bottom: 8px;
}

.nav-card p {
  font-size: 14px;
  color: #5a67d8; /* Màu chữ mô tả (LẤY TỪ CANVA) */
  line-height: 1.6;
}

.nav-card-icon {
  font-size: 24px;
  color: #7b61ff; /* Màu icon mũi tên (LẤY TỪ CANVA) */
  margin-left: 20px; /* Khoảng cách từ text đến icon */
  flex-shrink: 0; /* Không cho icon bị co lại */
}
/* ============================
   MCQ TOPIC LIST PAGE - UPDATED
   ============================ */
/* .page-header-section, .mcq-topic-list-section đã có style */

.mcq-topic-container {
  display: grid; /* Sử dụng Grid Layout */
  grid-template-columns: 1fr 1fr; /* Hai cột chính */
  gap: 40px; /* Khoảng cách giữa các khu vực */
  align-items: flex-start;
}

.topic-selection-area,
.start-custom-quiz-area {
  background-color: #fff;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
}

.topic-selection-area h4,
.start-custom-quiz-area h4 {
  font-size: 18px;
  font-weight: 600;
  color: #334155;
  margin-bottom: 15px;
}

.topic-list-condensed {
  list-style: none;
  padding: 0;
  margin: 0 0 15px 0;
}

.topic-list-condensed li {
  margin-bottom: 10px;
}

.topic-list-condensed li a {
  display: block;
  padding: 10px 15px;
  background-color: #f7f8fc;
  color: #334155;
  text-decoration: none;
  border-radius: 6px;
  font-weight: 500;
  transition: background-color 0.2s ease, color 0.2s ease;
  border: 1px solid #e2e8f0;
}

.topic-list-condensed li a:hover {
  background-color: #6a5acd;
  color: #fff;
  border-color: #6a5acd;
}

.btn-view-all-topics {
  color: #6a5acd;
  font-weight: 600;
  padding: 8px 0; /* Để dễ click hơn */
  background: none;
  border: none;
  cursor: pointer;
}
.btn-view-all-topics i {
  margin-right: 6px;
}

.btn-view-all-topics:hover {
  text-decoration: underline;
}

.start-custom-quiz-area .btn-block {
  width: 100%;
  padding: 12px 20px;
  font-size: 16px;
  font-weight: 600;
  border-radius: 8px; /* Hoặc 25px tùy thiết kế */
  display: flex;
  align-items: center;
  justify-content: center;
}
.start-custom-quiz-area .btn-block i {
  margin-right: 8px;
}

.mcq-page-illustration {
  /* Đẩy sang cột thứ 2, hàng thứ 2 nếu grid có nhiều hàng */
  grid-column: 2 / 3; /* Bắt đầu từ cột 2 */
  grid-row: 1 / span 2; /* Kéo dài 2 hàng nếu .topic-selection và .start-custom-quiz ở cột 1 */
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 20px; /* Khoảng cách với các box bên trái */
}
.mcq-page-illustration img {
  max-width: 100%; /* Giữ lại để responsive bên trong div */
  /* THÊM HOẶC THAY ĐỔI: */
  /* Cách 1: Giới hạn chiều cao tối đa, chiều rộng sẽ tự điều chỉnh */
  max-height: 500px; /* Ví dụ: giới hạn chiều cao tối đa của ảnh là 350px */

  /* Cách 2: Giới hạn chiều rộng tối đa cụ thể hơn nữa */
  /* max-width: 400px; */ /* Ví dụ: giới hạn chiều rộng tối đa của ảnh là 400px */

  /* Cách 3: Nếu bạn muốn ảnh luôn chiếm một tỷ lệ nhất định của div cha,
     và div cha đã được giới hạn kích thước hợp lý bởi grid/flex.
     max-width: 80%; /* Ví dụ: ảnh chỉ chiếm 80% chiều rộng của .mcq-page-illustration */

  height: auto; /* Quan trọng để giữ tỷ lệ */
  object-fit: contain; /* Đảm bảo toàn bộ ảnh được hiển thị, có thể để lại khoảng trống */
  /* hoặc 'cover' nếu bạn muốn ảnh lấp đầy và chấp nhận bị cắt */
  opacity: 0.9;
}
/* Điều chỉnh lại nếu bố cục 3 phần ngang hàng */
@media (max-width: 300px) {
  /* Cho màn hình nhỏ hơn */
  .mcq-topic-container {
    grid-template-columns: 1fr; /* 1 cột */
  }
  .mcq-page-illustration {
    grid-column: auto; /* Reset grid column */
    grid-row: auto; /* Reset grid row */
    margin-top: 10px;
    padding-left: 0;
  }
}

/* ============================
   MODAL STYLES (Chung cho các pop-up)
   ============================ */
.modal {
  display: none; /* Mặc định ẩn */
  position: fixed; /* Nằm cố định trên màn hình */
  z-index: 1050; /* Nằm trên cùng */
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto; /* Cho phép cuộn nếu nội dung modal dài */
  background-color: rgba(0, 0, 0, 0.5); /* Lớp nền mờ */
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.modal-content {
  background-color: #fff;
  margin: 10% auto; /* Căn giữa modal, cách top 10% */
  padding: 0;
  border: 1px solid #ddd;
  border-radius: 10px;
  width: 90%; /* Rộng 90% trên màn hình nhỏ */
  max-width: 600px; /* Chiều rộng tối đa */
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  animation: slideIn 0.3s ease-out;
  position: relative;
}

@keyframes slideIn {
  from {
    transform: translateY(-30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.modal-header {
  padding: 15px 20px;
  border-bottom: 1px solid #e9ecef;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-header h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: #1f2374;
}

.close-modal-btn {
  background: none;
  border: none;
  font-size: 24px;
  font-weight: bold;
  color: #aaa;
  cursor: pointer;
  padding: 0 5px;
}

.close-modal-btn:hover {
  color: #333;
}

.modal-body {
  padding: 20px;
  max-height: 60vh; /* Giới hạn chiều cao, cho phép cuộn */
  overflow-y: auto;
}

/* --- Styles cho Modal "Tất cả chủ đề" --- */
.full-topic-list {
  list-style: none;
  padding: 0;
  margin: 0;
  columns: 2; /* Chia thành 2 cột nếu đủ không gian */
  gap: 10px;
}

@media (max-width: 768px) {
  .full-topic-list {
    columns: 1; /* 1 cột trên màn hình nhỏ */
  }
}

.full-topic-list li {
  margin-bottom: 8px;
}

.full-topic-list li a {
  display: block;
  padding: 8px 12px;
  text-decoration: none;
  color: #334155;
  border-radius: 5px;
  transition: background-color 0.2s ease;
}

.full-topic-list li a:hover {
  background-color: #f0f2ff;
  color: #5b69df;
}
.full-topic-list hr {
  border: 0;
  border-top: 1px dashed #e0e0e0;
  margin: 10px 0;
  grid-column: 1 / -1; /* Cho hr kéo dài qua các cột */
}

/* --- Styles cho Modal "Tùy chỉnh bài làm" --- */
#customizeQuizForm .form-group {
  margin-bottom: 15px;
}

#customizeQuizForm label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: #444;
  margin-bottom: 6px;
}

#customizeQuizForm select,
#customizeQuizForm input[type="number"] {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #ced4da;
  border-radius: 6px;
  font-size: 15px;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

#customizeQuizForm select:focus,
#customizeQuizForm input[type="number"]:focus {
  border-color: #5b69df;
  box-shadow: 0 0 0 0.2rem rgba(91, 105, 223, 0.25);
  outline: none;
}

#customizeQuizForm .btn-block {
  /* Sử dụng lại style nút đã có hoặc định nghĩa riêng */
  margin-top: 20px;
}
/* ============================
   MCQ QUIZ PAGE
   ============================ */
.mcq-quiz-section {
  padding: 40px 0;
  background-color: #f4f7fc; /* Nền nhạt cho trang quiz */
}

.quiz-header-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  padding-bottom: 20px;
  border-bottom: 1px solid #dfe6f0;
}

.quiz-header-info h2 {
  font-size: 24px;
  font-weight: 700;
  color: #1f2374;
}

.quiz-meta span {
  font-size: 14px;
  color: #4a55a2;
  background-color: #eef2ff;
  padding: 6px 12px;
  border-radius: 20px;
  margin-left: 15px;
  font-weight: 500;
}

.quiz-area {
  background-color: #ffffff;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
}

.question-container {
  margin-bottom: 25px;
}

.question-number {
  font-size: 16px;
  font-weight: 600;
  color: #7b61ff; /* Màu cho "CÂU X:" */
  margin-bottom: 5px;
}

.question-text {
  font-size: 18px;
  font-weight: 500;
  color: #334155;
  line-height: 1.7;
  min-height: 60px; /* Đảm bảo không gian cho câu hỏi dài */
}

.answer-options {
  display: grid;
  grid-template-columns: 1fr; /* Mặc định 1 cột */
  gap: 15px;
  margin-bottom: 30px;
}
/* Cho 2 cột trên màn hình lớn hơn */
@media (min-width: 768px) {
  .answer-options {
    grid-template-columns: 1fr 1fr; /* 2 cột */
  }
}

.answer-option {
  display: flex;
  align-items: flex-start; /* Căn đầu cho các lựa chọn dài */
  padding: 15px;
  border: 1px solid #d1d9e6;
  border-radius: 8px;
  cursor: pointer;
  transition: border-color 0.2s ease, background-color 0.2s ease;
  background-color: #f8f9fc;
}

.answer-option:hover {
  border-color: #a9b1ff;
  background-color: #f0f2ff;
}

.answer-option input[type="radio"] {
  margin-top: 4px; /* Căn chỉnh radio button với text */
  margin-right: 12px;
  flex-shrink: 0; /* Không cho radio co lại */
  /* Có thể custom radio button sau */
}

.answer-option .option-letter {
  font-weight: 600;
  color: #5b69df;
  margin-right: 5px;
}
.answer-option .option-text {
  font-size: 15px;
  color: #475569;
  line-height: 1.6;
}

.answer-option input[type="radio"]:checked + .option-letter + .option-text {
  /* Style cho text của lựa chọn được chọn nếu cần */
}
.answer-option input[type="radio"]:checked ~ span {
  /* Hoặc chỉ .option-text */
  /* font-weight: bold; */
}
.answer-option.selected {
  /* Class này sẽ được thêm bằng JS */
  border-color: #5b69df;
  background-color: #e8eaff;
}

.quiz-actions {
  display: flex;
  justify-content: flex-end; /* Căn nút về bên phải */
  gap: 15px;
  padding-top: 20px;
  border-top: 1px solid #dfe6f0;
}

.quiz-actions .btn {
  padding: 10px 25px;
  font-size: 15px;
  font-weight: 600;
  border-radius: 25px;
}
/* ============================
   MCQ RESULT PAGE
   ============================ */
.mcq-result-section {
  padding: 40px 0;
  background-color: #f4f7fc;
  text-align: center; /* Căn giữa nội dung */
}

.result-header h2 {
  font-size: 28px;
  font-weight: 700;
  color: #1f2374;
  margin-bottom: 30px;
}

.result-summary-card {
  background-color: #ffffff;
  padding: 30px 40px;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
  display: inline-block; /* Để card co lại theo nội dung và căn giữa */
  text-align: left; /* Căn text bên trong card về trái */
  max-width: 600px; /* Giới hạn chiều rộng card */
  margin-bottom: 30px;
}

.result-summary-card h3 {
  font-size: 20px;
  font-weight: 600;
  color: #334155;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px dashed #dfe6f0;
}
.result-summary-card h3 #resultActualTopic {
  color: #5b69df; /* Màu cho tên chủ đề */
}

.score-details p {
  font-size: 16px;
  color: #475569;
  margin-bottom: 10px;
  line-height: 1.7;
}

.score-details p strong {
  font-weight: 700;
  color: #1f2374;
}

.score-details .final-score strong {
  font-size: 22px;
  color: #2ecc71; /* Màu xanh lá cho điểm số tốt */
  /* Nếu điểm thấp có thể đổi màu thành đỏ/cam bằng JS */
}

.review-answers-link {
  display: inline-block;
  margin-top: 20px;
  font-size: 15px;
  font-weight: 600;
  color: #5b69df;
  text-decoration: none;
}
.review-answers-link i {
  margin-right: 8px;
}

.review-answers-link:hover {
  text-decoration: underline;
}

.result-actions {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}

.result-actions .btn {
  padding: 12px 25px;
  font-size: 15px;
  font-weight: 600;
  border-radius: 25px;
  text-decoration: none; /* Cho thẻ <a> */
}
.result-actions .btn i {
  margin-right: 8px;
}
/* ===========================================================
   CASE SIMULATION PAGE STYLES (case_simulation.html) - LÀM LẠI
   =========================================================== */
body {
  background-color: #f4f7fc; /* Nền chung cho trang */
}
.container {
  /* Đảm bảo container có padding */
  padding-left: 15px;
  padding-right: 15px;
}

.case-simulation-page {
  padding: 20px 0;
}

.case-sim-main-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  margin-bottom: 20px;
}
.case-sim-main-header h1 {
  font-size: 22px;
  color: #1f2374;
  font-weight: 700;
  margin: 0;
}
.case-sim-actions-top .btn {
  margin-left: 10px;
  font-size: 14px;
  padding: 8px 15px;
}
.case-sim-actions-top .btn i {
  margin-right: 6px;
}

.case-initial-info {
  background-color: #fff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
  margin-bottom: 25px;
  font-size: 15px;
  line-height: 1.7;
  color: #344054;
}

.main-interaction-buttons {
  display: flex;
  justify-content: space-around; /* Hoặc space-between */
  gap: 20px;
  margin-bottom: 25px;
}
.btn-interaction-main {
  flex-grow: 1; /* Các nút chia đều không gian */
  padding: 15px 20px;
  font-size: 16px;
  font-weight: 600;
  border-radius: 8px;
  background-color: #5b69df; /* Màu chính */
  color: white;
  border: none;
  transition: background-color 0.2s, transform 0.1s;
}
.btn-interaction-main:hover {
  background-color: #4a55c5;
  transform: translateY(-2px);
}
.btn-interaction-main:disabled {
  background-color: #c5cae9;
  cursor: not-allowed;
  transform: none;
}
.btn-interaction-main i {
  margin-right: 10px;
}

.action-log-display {
  background-color: #fff;
  padding: 15px;
  border-radius: 8px;
  border: 1px solid #eef2f7;
  margin-top: 20px;
  max-height: 200px;
  overflow-y: auto;
}
.action-log-display h4 {
  font-size: 15px;
  color: #667085;
  margin-bottom: 8px;
  font-weight: 500;
}
.action-log-display ul {
  list-style: none;
  padding: 0;
  margin: 0;
  font-size: 13px;
  color: #475467;
}
.action-log-display li {
  padding: 4px 0;
  border-bottom: 1px dotted #f0f2f5;
}
.action-log-display li:last-child {
  border-bottom: none;
}

/* --- MODAL STYLES (Chung) --- */
.modal {
  display: none;
  position: fixed;
  z-index: 1050;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: hidden; /* Ngăn cuộn body khi modal mở */
  background-color: rgba(0, 0, 0, 0.6);
  animation: fadeInModal 0.3s ease-out;
}
@keyframes fadeInModal {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.modal-content {
  background-color: #fff;
  margin: 5% auto; /* Căn giữa, cách top 5% */
  border-radius: 10px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  animation: slideInModal 0.3s ease-out;
  display: flex;
  flex-direction: column;
  max-height: 90vh; /* Giới hạn chiều cao của modal */
}
@keyframes slideInModal {
  from {
    transform: translateY(-50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.modal.large-modal .modal-content {
  max-width: 950px; /* Cho các modal cần nhiều không gian hơn */
  width: 85%;
}
.modal.extra-large-modal .modal-content {
  /* Kích thước MỚI để gần toàn màn hình hơn */
  width: 95vw; /* Chiếm 95% chiều rộng của viewport */
  max-width: 1800px; /* Giới hạn chiều rộng tối đa nếu màn hình rất lớn */
  height: 90vh; /* Chiếm 90% chiều cao của viewport */
  max-height: 1000px; /* Giới hạn chiều cao tối đa */
  margin: 2.5vh auto; /* Căn giữa và tạo khoảng cách nhỏ trên dưới */
  /* Các thuộc tính khác như display: flex, flex-direction: column, background-color, border-radius, box-shadow giữ nguyên */
}

/* Đảm bảo modal-body của canvas chiếm hết không gian còn lại */
.modal.extra-large-modal .modal-body.canvas-container-flex {
  padding: 0 !important; /* Bỏ padding nếu có để các panel con chiếm trọn */
  flex-grow: 1; /* Quan trọng */
  display: flex; /* Đã có */
  height: calc(
    100% - 60px - 55px
  ); /* Ví dụ: 100% trừ đi chiều cao header và footer của modal. Điều chỉnh số này cho phù hợp. */
  /* Hoặc đơn giản hơn, nếu modal-header và modal-footer có chiều cao cố định, bạn có thể để height: 100% và overflow:hidden cho modal-body,
       và để các panel con bên trong nó (tag-list-panel-canvas, main-canvas-area-wrapper-flex) tự chia không gian.
       Nhưng cách calc() thường kiểm soát tốt hơn.
    */
}

/* Đảm bảo panel tag và khu vực canvas chính cũng linh hoạt */
.tag-list-panel-canvas {
  /* flex-basis: 280px; Giữ nguyên hoặc điều chỉnh nếu muốn panel tag rộng hơn */
  /* overflow-y: auto; Giữ nguyên */
  height: 100%; /* Cho panel tag chiếm hết chiều cao của modal-body */
}

.main-canvas-area-wrapper-flex {
  /* flex-grow: 1; Giữ nguyên */
  /* display: flex; flex-direction: column; Giữ nguyên */
  /* overflow: hidden; Giữ nguyên */
  height: 100%; /* Cho wrapper chiếm hết chiều cao */
}

.actual-canvas-drawing-area {
  /* flex-grow: 1; Giữ nguyên */
  /* background-color, background-image, background-size, position, overflow: auto - Giữ nguyên */
  /* min-height không còn quá quan trọng nếu .main-canvas-area-wrapper-flex đã có height 100% */
  height: 100%; /* Cho khu vực vẽ chiếm hết không gian của wrapper */
}
.modal-header {
  padding: 15px 25px;
  border-bottom: 1px solid #e9ecef;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #f8f9fa; /* Nền nhẹ cho header modal */
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}
.modal-header h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: #1f2374;
}
.close-modal-btn {
  background: none;
  border: none;
  font-size: 26px;
  color: #888;
  cursor: pointer;
}
.close-modal-btn:hover {
  color: #333;
}

.modal-body {
  padding: 25px;
  overflow-y: auto; /* Cho phép cuộn nội dung body modal nếu dài */
  flex-grow: 1; /* Để body chiếm hết không gian còn lại */
}

.modal-columns {
  /* Layout 3 cột cho các modal tương tác */
  display: flex;
  gap: 20px;
}
.interaction-column {
  flex: 1; /* Chia đều không gian */
  padding: 10px;
  background-color: #f9fafb;
  border: 1px solid #eef2f7;
  border-radius: 6px;
  min-width: 250px; /* Chiều rộng tối thiểu cho mỗi cột */
}
.interaction-column h4 {
  font-size: 15px;
  font-weight: 500;
  color: #4a55a2;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px dashed #d1d9e6;
}
/* Cột chứa thông tin thu thập được (cột thứ 3) */
.information-collected-column {
  flex-basis: 40%; /* Cột này có thể rộng hơn */
  background-color: #fff;
}
.collected-items-container {
  max-height: 300px; /* Giới hạn chiều cao, cho phép cuộn */
  overflow-y: auto;
  margin-bottom: 15px;
  padding-right: 5px; /* Cho thanh cuộn */
}
.collected-item {
  display: flex;
  align-items: flex-start;
  padding: 8px 5px;
  font-size: 14px;
  border-bottom: 1px solid #f0f2f5;
}
.collected-item input[type="checkbox"] {
  margin-right: 10px;
  margin-top: 3px; /* Căn chỉnh với text */
  flex-shrink: 0;
}
.collected-item label {
  cursor: pointer;
  line-height: 1.5;
  color: #344054;
}

/* --- Style cho các nút và input trong các modal tương tác --- */
#askHistoryCategories button,
#examCategories button,
#labCategories button {
  display: block;
  width: 100%;
  padding: 10px;
  margin-bottom: 8px;
  text-align: left;
  background-color: #fff;
  border: 1px solid #d1d9e6;
  border-radius: 5px;
  font-size: 14px;
  cursor: pointer;
}
#askHistoryCategories button:hover,
#examCategories button:hover,
#labCategories button:hover {
  background-color: #e8eaff;
  border-color: #5b69df;
  color: #5b69df;
}
#askHistoryQuestions,
#examInteractionArea,
#labResultsArea {
  /* Panel hiển thị chi tiết câu hỏi/kết quả */
  min-height: 150px; /* Đảm bảo có không gian */
  padding-top: 10px;
}
#searchLabInput {
  /* Input tìm kiếm CLS */
  width: 100%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  margin-bottom: 15px;
  font-size: 14px;
}

/* --- Modal Bệnh Án (Display Only) --- */
#medicalRecordDisplayModal .modal-body {
  padding: 20px;
}
#displayedMedicalRecordForm fieldset {
  /* Style giống form nhập liệu */
  border: 1px solid #dcdcdc;
  padding: 15px;
  margin-bottom: 20px;
  border-radius: 6px;
}
#displayedMedicalRecordForm legend {
  font-weight: 600;
  color: #5b69df;
  padding: 0 10px;
  font-size: 16px;
}
#displayedMedicalRecordForm .form-group p,
#displayedMedicalRecordForm .form-group-inline p {
  /* Hiển thị text thay vì input */
  font-size: 14px;
  color: #1d2939;
  margin: 0;
  padding: 8px 0;
  white-space: pre-wrap; /* Giữ nguyên xuống dòng từ textarea */
}
#displayedMedicalRecordForm textarea[readonly] {
  /* Style cho textarea readonly */
  background-color: #f8f9fa;
  border: 1px solid #e9ecef;
  color: #495057;
  cursor: default;
  min-height: 60px;
  padding: 8px 10px;
  width: 100%;
  border-radius: 4px;
  font-size: 14px;
  line-height: 1.6;
}

/* --- Modal Clinical Reasoning Canvas --- */
.canvas-container-flex {
  /* Cho modal body của canvas */
  display: flex;
  height: 100%; /* Quan trọng để các panel con chiếm hết chiều cao */
  padding: 0 !important; /* Bỏ padding của modal-body chung */
}

.tag-list-panel-canvas {
  flex-basis: 280px; /* Rộng hơn chút */
  flex-shrink: 0;
  background-color: #f8f9fa;
  padding: 15px;
  border-right: 1px solid #e0e4e8;
  overflow-y: auto;
}
.tag-list-panel-canvas h3 {
  font-size: 16px;
  color: #1f2374;
  margin-bottom: 12px;
  border-bottom: 1px solid #e0e4e8;
  padding-bottom: 10px;
}
#canvasAvailableTags {
  list-style: none;
  padding: 0;
  margin: 0;
}
#canvasAvailableTags li {
  padding: 8px 12px;
  margin-bottom: 8px;
  border-radius: 5px;
  font-size: 13px;
  cursor: grab;
  border: 1px solid #d1d9e6;
  background-color: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  /* Màu sắc sẽ được JS thêm vào style inline */
}
#canvasAvailableTags li:hover {
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.main-canvas-area-wrapper-flex {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* Để actual-canvas-area không tràn */
}

.canvas-toolbar-main {
  padding: 10px 15px;
  background-color: #f1f3f5;
  border-bottom: 1px solid #dee2e6;
  display: flex;
  flex-wrap: wrap; /* Cho phép xuống dòng nếu nhiều nút */
  gap: 8px;
  align-items: center;
}
.btn-canvas-tool {
  padding: 7px 12px;
  font-size: 13px;
  border-radius: 5px;
}
.btn-canvas-tool i {
  margin-right: 5px;
}

.actual-canvas-area {
  flex-grow: 1;
  background-color: #e9ecef;
  background-image: radial-gradient(circle, #ced4da 0.8px, transparent 0.8px);
  background-size: 20px 20px;
  position: relative;
  overflow: auto; /* Quan trọng để cuộn canvas */
}

.modal-footer {
  padding: 15px 25px;
  border-top: 1px solid #e9ecef;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  background-color: #f8f9fa;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
}
.modal-footer .btn {
  padding: 10px 20px;
  font-size: 14px;
}
/* =====================================
   CASE LIBRARY PAGE - NEW STYLES
   ===================================== */

/* page-header-section có thể đã có style chung, nếu chưa thì thêm: */
.page-header-section {
  background-color: #f0f4f8; /* Màu nền nhẹ */
  padding: 40px 0;
  text-align: center;
  border-bottom: 1px solid #dde3ea;
}
.page-header-section h1 {
  font-size: 32px;
  font-weight: 700;
  color: #1f2374; /* Màu xanh đậm chủ đạo */
  margin-bottom: 10px;
}
.page-header-section h1 i {
  margin-right: 12px;
  color: #5b69df; /* Màu xanh dương */
}
.page-header-section p {
  font-size: 16px;
  color: #475467;
  max-width: 600px;
  margin: 0 auto;
}

.case-library-main-content {
  padding: 30px 0 50px;
}

.filter-controls-bar {
  display: flex;
  flex-wrap: wrap; /* Cho phép xuống dòng trên màn hình nhỏ */
  justify-content: space-between;
  align-items: center;
  gap: 20px;
  padding: 15px;
  background-color: #ffffff;
  border-radius: 8px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.07);
  margin-bottom: 30px;
}

.search-input-group {
  display: flex;
  align-items: center;
  flex-grow: 1; /* Cho phép ô tìm kiếm co giãn */
  min-width: 280px; /* Đảm bảo không quá hẹp */
}
.search-input-group input[type="text"] {
  width: 100%;
  padding: 12px 15px;
  border: 1px solid #d0d5dd;
  border-right: none; /* Bỏ viền phải để dính liền với nút */
  border-top-left-radius: 6px;
  border-bottom-left-radius: 6px;
  font-size: 15px;
  outline: none;
}
.search-input-group input[type="text"]:focus {
  border-color: #5b69df;
  box-shadow: 0 0 0 2px rgba(91, 105, 223, 0.2);
}
.btn-search-icon {
  padding: 12px 15px;
  background-color: #5b69df;
  color: white;
  border: 1px solid #5b69df;
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
  cursor: pointer;
  font-size: 15px;
}
.btn-search-icon:hover {
  background-color: #4a55c5;
}

.filter-dropdowns {
  display: flex;
  gap: 15px;
}
.filter-dropdowns select {
  padding: 12px 15px;
  border: 1px solid #d0d5dd;
  border-radius: 6px;
  font-size: 15px;
  background-color: #fff;
  min-width: 200px; /* Đảm bảo select có độ rộng nhất định */
  cursor: pointer;
}
.filter-dropdowns select:focus {
  border-color: #5b69df;
  outline: none;
  box-shadow: 0 0 0 2px rgba(91, 105, 223, 0.2);
}

.case-listing-grid {
  display: grid;
  grid-template-columns: repeat(
    auto-fill,
    minmax(300px, 1fr)
  ); /* Responsive grid */
  gap: 25px;
}

.loading-placeholder,
.no-cases-found {
  grid-column: 1 / -1; /* Chiếm toàn bộ chiều rộng của grid */
  text-align: center;
  padding: 40px 20px;
  font-size: 18px;
  color: #667085;
}
.loading-placeholder i,
.no-cases-found i {
  font-size: 24px;
  margin-right: 10px;
  color: #5b69df;
}

.case-item-card {
  background-color: #ffffff;
  border: 1px solid #e4e7ec;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  display: flex;
  flex-direction: column;
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}
.case-item-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.case-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 15px;
  border-bottom: 1px solid #f0f2f5;
  font-size: 13px;
}
.case-card-specialty {
  color: #475467;
  font-weight: 500;
}
.case-card-specialty i {
  margin-right: 6px;
  color: #7f56d9; /* Màu tím cho chuyên khoa */
}
.case-card-difficulty {
  padding: 3px 8px;
  border-radius: 12px; /* Bo tròn hơn */
  font-weight: 500;
  color: #fff; /* Chữ trắng cho dễ đọc trên nền màu */
}
.case-card-difficulty i {
  margin-right: 4px;
}

.difficulty-easy {
  background-color: #10b981;
} /* Xanh lá */
.difficulty-medium {
  background-color: #f59e0b;
} /* Cam */
.difficulty-hard {
  background-color: #ef4444;
} /* Đỏ */

.case-card-body {
  padding: 15px;
  flex-grow: 1; /* Cho phép body co giãn để đẩy footer xuống */
}
.case-card-title {
  font-size: 18px;
  font-weight: 600;
  color: #1d2939;
  margin-bottom: 8px;
  line-height: 1.4;
  /* Giới hạn 2 dòng */
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  min-height: calc(1.4em * 2); /* Chiều cao tối thiểu cho 2 dòng */
}
.case-card-description {
  font-size: 14px;
  color: #475467;
  line-height: 1.6;
  margin-bottom: 0; /* Bỏ margin bottom nếu footer sẽ xử lý khoảng cách */
  /* Giới hạn 3 dòng */
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.case-card-footer {
  padding: 15px;
  border-top: 1px solid #f0f2f5;
  text-align: right; /* Hoặc center tùy thiết kế */
}
.case-card-footer .btn-sm {
  /* Style cho nút nhỏ hơn */
  padding: 8px 15px;
  font-size: 14px;
}
.case-card-footer .btn-sm i {
  margin-right: 6px;
}
/* =====================================
   CASE SIMULATION PAGE - NEW STYLES
   ===================================== */
.case-simulation-page-content {
  padding: 20px 0 50px;
}

.case-sim-header-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  margin-bottom: 25px;
}
.case-sim-header-bar h1 {
  font-size: 20px;
  font-weight: 600;
  color: #1f2374;
  margin: 0;
}
.case-sim-top-actions .btn-sm {
  margin-left: 10px;
}
.case-sim-top-actions .btn-sm i {
  margin-right: 6px;
}

.case-initial-presentation {
  background-color: #e9f3ff; /* Nền xanh nhạt cho thông tin ban đầu */
  padding: 20px;
  border-radius: 8px;
  margin-bottom: 25px;
  font-size: 15px;
  line-height: 1.7;
  color: #1d2939; /* Chữ đậm hơn */
  border: 1px solid #c7dfff;
}
.case-initial-presentation .loading-text {
  color: #5b69df;
  font-style: italic;
}

.main-clinical-actions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}
.btn-action-major {
  padding: 20px;
  font-size: 17px;
  font-weight: 600;
  border-radius: 8px;
  background-color: #5b69df;
  color: white;
  border: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.15s;
  min-height: 120px; /* Đảm bảo chiều cao đồng đều */
}
.btn-action-major:hover {
  background-color: #4a55c5;
  transform: translateY(-3px);
}
.btn-action-major:disabled {
  background-color: #adb5bd; /* Màu xám hơn cho nút bị khóa */
  color: #6c757d;
  cursor: not-allowed;
  transform: none;
}
.btn-action-major:disabled .lock-indicator {
  display: inline; /* Hiện icon khóa */
  color: #e9ecef;
}

.btn-action-major i {
  /* Icon lớn ở trên */
  font-size: 28px;
  margin-bottom: 10px;
}
.btn-action-major .lock-indicator {
  display: none; /* Ẩn icon khóa mặc định */
  font-size: 12px;
  margin-left: 8px;
  vertical-align: middle;
}

.student-action-log-container {
  background-color: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 8px;
  padding: 15px 20px;
  margin-top: 20px;
}
.student-action-log-container h4 {
  font-size: 16px;
  font-weight: 500;
  color: #495057;
  margin-bottom: 10px;
}
.student-action-log-container h4 i {
  margin-right: 8px;
}
#studentActionLogList {
  list-style: none;
  padding: 0;
  margin: 0;
  max-height: 150px;
  overflow-y: auto;
  font-size: 14px;
}
#studentActionLogList li {
  padding: 6px 0;
  color: #6c757d;
  border-bottom: 1px dotted #dee2e6;
}
#studentActionLogList li:last-child {
  border-bottom: none;
}

/* --- MODAL TƯƠNG TÁC (Chung cho Hỏi Bệnh, Khám LS, CLS) --- */
.interaction-modal .modal-content {
  max-width: 1100px; /* Rộng hơn để chứa 3 cột thoải mái */
  width: 90%;
}
.interaction-modal .modal-header h2 i {
  margin-right: 10px;
  color: #5b69df;
}

.modal-columns-layout {
  display: flex;
  gap: 20px; /* Khoảng cách giữa các cột */
  height: 100%; /* Để các cột có chiều cao bằng nhau nếu modal-body có height cố định */
}

.interaction-column {
  display: flex;
  flex-direction: column; /* Sắp xếp h4 và list theo chiều dọc */
  background-color: #f9fafb;
  border: 1px solid #eef2f7;
  border-radius: 6px;
  padding: 15px;
  overflow: hidden; /* Ngăn nội dung tràn ra ngoài */
}
.interaction-column h4 {
  font-size: 14px;
  font-weight: 600;
  color: #4a55a2; /* Màu tím than */
  margin-bottom: 12px;
  padding-bottom: 10px;
  border-bottom: 1px solid #e0e4e8;
  text-transform: uppercase;
  flex-shrink: 0; /* Để h4 không bị co lại */
}

.column-categories {
  flex-basis: 25%;
} /* Cột 1: Chọn mục */
.column-details {
  flex-basis: 40%;
} /* Cột 2: Chi tiết/Câu hỏi */
.column-collected-info {
  /* Cột 3: Thông tin thu thập */
  flex-basis: 35%;
  background-color: #fff; /* Nền trắng cho cột này */
}

.items-list-scrollable {
  flex-grow: 1; /* Cho phép list này chiếm hết không gian còn lại trong cột */
  overflow-y: auto;
  padding-right: 5px; /* Chỗ cho thanh cuộn */
}
.column-loading-text,
.column-placeholder-text {
  font-style: italic;
  color: #6c757d;
  text-align: center;
  padding: 20px 10px;
  font-size: 14px;
}

/* Style cho các item trong cột 1 (categories) và cột 2 (questions/skills) */
.items-list-scrollable .list-item-button {
  display: block;
  width: 100%;
  padding: 10px 12px;
  margin-bottom: 8px;
  text-align: left;
  background-color: #fff;
  border: 1px solid #d1d9e6;
  border-radius: 5px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.15s, border-color 0.15s;
}
.items-list-scrollable .list-item-button:hover {
  background-color: #eef2ff;
  border-color: #7986cb;
}
.items-list-scrollable .list-item-button.active {
  /* Khi item được chọn */
  background-color: #5b69df;
  color: white;
  border-color: #5b69df;
  font-weight: 500;
}

/* Style cho các item trong cột 3 (collected info) */
.collected-items-list-scrollable .collected-item {
  display: flex;
  align-items: flex-start; /* Để checkbox và label căn đều ở trên nếu label dài */
  padding: 10px 8px;
  font-size: 14px;
  border-bottom: 1px solid #f0f2f5;
  background-color: #fff;
  margin-bottom: 5px;
  border-radius: 4px;
}
.collected-items-list-scrollable .collected-item:last-child {
  border-bottom: none;
}
.collected-items-list-scrollable .collected-item input[type="checkbox"] {
  margin-right: 10px;
  margin-top: 4px; /* Căn chỉnh với dòng text đầu tiên */
  flex-shrink: 0; /* Không cho checkbox co lại */
  cursor: pointer;
}
.collected-items-list-scrollable .collected-item label {
  cursor: pointer;
  line-height: 1.5;
  color: #344054;
  word-break: break-word; /* Xuống dòng nếu text quá dài */
}
.collected-items-list-scrollable .collected-item .source-question {
  /* (Tùy chọn) Hiển thị câu hỏi gốc */
  display: block;
  font-size: 12px;
  color: #667085;
  margin-top: 3px;
  font-style: italic;
}

.interaction-column .btn-block {
  /* Nút "Thêm vào bệnh án" */
  margin-top: 15px; /* Khoảng cách với list ở trên */
  flex-shrink: 0; /* Để nút không bị co lại */
}
.interaction-column .btn-block:disabled {
  background-color: #e9ecef;
  border-color: #ced4da;
  color: #adb5bd;
  cursor: not-allowed;
}
.interaction-column .btn-block i {
  margin-right: 6px;
}

/* Input tìm kiếm trong modal CLS */
.modal-search-input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d0d5dd;
  border-radius: 5px;
  margin-bottom: 12px;
  font-size: 14px;
  box-sizing: border-box;
}

/* --- MODAL BỆNH ÁN ĐIỆN TỬ (HIỂN THỊ) --- */
#medicalRecordDisplayModal .modal-body {
  background-color: #f8f9fa; /* Nền nhẹ cho form */
}
#displayedMedicalRecordForm fieldset {
  background-color: #fff;
  border: 1px solid #e0e4e8;
  padding: 15px 20px;
  margin-bottom: 20px;
  border-radius: 6px;
}
#displayedMedicalRecordForm legend {
  font-weight: 600;
  color: #1f2374;
  padding: 0 8px;
  font-size: 17px;
  background-color: #fff; /* Để legend không bị nền của fieldset che */
}
#displayedMedicalRecordForm .form-grid {
  /* Layout lưới cho phần hành chính */
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
}
#displayedMedicalRecordForm .form-field {
  margin-bottom: 5px; /* Giảm margin nếu dùng grid */
}
#displayedMedicalRecordForm .form-field.full-width,
#displayedMedicalRecordForm .form-field.col-span-2 {
  grid-column: 1 / -1; /* Chiếm toàn bộ chiều rộng */
}
#displayedMedicalRecordForm label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: #475467;
  margin-bottom: 4px;
}
#displayedMedicalRecordForm p {
  /* Hiển thị dữ liệu text */
  font-size: 14px;
  color: #1d2939;
  margin: 0;
  padding: 6px 0;
  white-space: pre-wrap; /* Giữ nguyên các ký tự xuống dòng */
  line-height: 1.6;
}
#displayedMedicalRecordForm textarea[readonly] {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #d0d5dd;
  border-radius: 4px;
  font-size: 14px;
  background-color: #f9fafb; /* Nền nhẹ cho textarea readonly */
  color: #344054;
  line-height: 1.6;
  resize: none; /* Không cho resize */
  box-sizing: border-box;
  min-height: 50px; /* Chiều cao tối thiểu */
}
#medicalRecordDisplayModal .modal-footer button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* --- MODAL CLINICAL REASONING CANVAS --- */
/* (Giữ nguyên các style cho Canvas từ lần làm lại trước, hoặc điều chỉnh nếu cần) */
.canvas-container-flex {
  /* ... */
}
.tag-list-panel-canvas {
  /* ... */
}
.tag-color-legend {
  margin-bottom: 15px;
  font-size: 11px;
}
.tag-color-legend .legend-item {
  display: inline-block;
  padding: 3px 8px;
  margin-right: 5px;
  margin-bottom: 5px;
  border-radius: 3px;
  color: #333; /* Hoặc màu chữ tương phản */
}
#canvasAvailableTagsList_ref .canvas-tag-placeholder,
.actual-canvas-drawing-area .canvas-placeholder-text {
  font-style: italic;
  color: #888;
  text-align: center;
  padding: 30px 15px;
  font-size: 14px;
  line-height: 1.6;
}

/* CSS cho các khối và mũi tên trên canvas (cần được JS tạo và style) */
.canvas-draggable-block {
  position: absolute;
  padding: 10px 15px;
  border: 1px solid #666;
  border-radius: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  cursor: grab;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
  font-size: 13px;
  min-width: 120px; /* Chiều rộng tối thiểu */
  z-index: 10; /* Để nổi lên trên */
}
.canvas-draggable-block:active {
  cursor: grabbing;
}
.canvas-draggable-block .block-title {
  font-weight: bold;
  margin-bottom: 5px;
  padding-bottom: 5px;
  border-bottom: 1px dotted #ccc;
  font-size: 12px;
  text-transform: uppercase;
  color: #333;
}
.canvas-draggable-block.info-block {
  border-left: 5px solid #ffd700;
}
.canvas-draggable-block.ddx-block {
  border-left: 5px solid #ffa07a;
}
.canvas-draggable-block.investigation-block {
  border-left: 5px solid #add8e6;
}
.canvas-draggable-block.diff-diag-block {
  border-left: 5px solid #90ee90;
}

.canvas-draggable-block .tag-item-in-block {
  display: block;
  font-size: 12px;
  padding: 3px 0;
  color: #555;
}
/* (Thêm style cho mũi tên, sẽ phức tạp hơn, có thể dùng SVG) */
/* ... CSS đã có ... */

/* --- Style cho Modal Khám Lâm Sàng --- */
.items-list-scrollable .skill-item-button {
  /* Có thể thêm style riêng nếu cần phân biệt với nút category câu hỏi */
}

.mcq-for-skill-container {
  margin-top: 15px;
  padding-top: 15px;
  border-top: 1px dashed #ccc;
}
.mcq-for-skill-container h4 {
  font-size: 15px; /* Kích thước nhỏ hơn h4 của cột */
  color: #337ab7; /* Màu khác biệt */
  margin-bottom: 10px;
}
.mcq-for-skill-container h4 i {
  margin-right: 6px;
}

.mcq-item {
  margin-bottom: 15px;
  padding: 10px;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  background-color: #fdfdfd;
}
.mcq-item legend {
  font-weight: 500;
  font-size: 14px;
  margin-bottom: 8px;
  color: #333;
}
.mcq-option-label {
  display: block;
  padding: 6px 0;
  font-size: 14px;
  color: #444;
  cursor: pointer;
}
.mcq-option-label input[type="radio"] {
  margin-right: 8px;
  vertical-align: middle;
}
.mcq-option-label:hover {
  background-color: #f0f8ff; /* AliceBlue */
}

/* Nút thực hiện khám/trả lời MCQ */
.mcq-for-skill-container .btn-info,
.column-details .btn-success {
  /* Nút thực hiện khám trực tiếp */
  margin-top: 10px;
}

/* Highlight MCQ lỗi */
.mcq-item.mcq-error-highlight {
  border-color: #d9534f; /* Màu đỏ lỗi */
  background-color: #f2dede; /* Nền đỏ nhạt */
}
.mcq-error-highlight legend {
  color: #a94442; /* Chữ đỏ đậm hơn */
}

/* Style cho feedback MCQ (ví dụ nếu bạn muốn hiển thị trong modal) */
.mcq-feedback-list ul {
  list-style-type: none;
  padding-left: 0;
}
.mcq-feedback-list li {
  padding: 5px 0;
  font-size: 13px;
}
.mcq-feedback-list li.mcq-correct {
  color: green;
}
.mcq-feedback-list li.mcq-incorrect {
  color: red;
}
.mcq-feedback-list li.mcq-missing {
  color: orange;
}
/* ... CSS đã có ... */

.mcq-feedback-text {
  font-size: 0.9em;
  margin-top: 5px;
  padding-left: 25px; /* Để thụt vào so với radio button */
}
.mcq-feedback-text.text-success {
  color: #28a745; /* Màu xanh lá cây */
  font-weight: bold;
}
.mcq-feedback-text.text-danger {
  color: #dc3545; /* Màu đỏ */
  font-weight: bold;
}
.mcq-item.mcq-error-highlight {
  border: 1px solid #dc3545 !important; /* Viền đỏ đậm hơn */
  background-color: #f8d7da !important; /* Nền hồng nhạt */
}
.mcq-error-highlight legend {
  color: #721c24 !important; /* Chữ đỏ cho legend */
} /* ... CSS đã có ... */

.mcq-feedback-text {
  font-size: 0.9em;
  margin-top: 5px;
  padding-left: 25px; /* Để thụt vào so với radio button */
}
.mcq-feedback-text.text-success {
  color: #28a745; /* Màu xanh lá cây */
  font-weight: bold;
}
.mcq-feedback-text.text-danger {
  color: #dc3545; /* Màu đỏ */
  font-weight: bold;
}
.mcq-item.mcq-error-highlight {
  border: 1px solid #dc3545 !important; /* Viền đỏ đậm hơn */
  background-color: #f8d7da !important; /* Nền hồng nhạt */
}
.mcq-error-highlight legend {
  color: #721c24 !important; /* Chữ đỏ cho legend */
} /* ... CSS đã có ... */

.mcq-feedback-text {
  font-size: 0.9em;
  margin-top: 5px;
  padding-left: 25px; /* Để thụt vào so với radio button */
}
.mcq-feedback-text.text-success {
  color: #28a745; /* Màu xanh lá cây */
  font-weight: bold;
}
.mcq-feedback-text.text-danger {
  color: #dc3545; /* Màu đỏ */
  font-weight: bold;
}
.mcq-item.mcq-error-highlight {
  border: 1px solid #dc3545 !important; /* Viền đỏ đậm hơn */
  background-color: #f8d7da !important; /* Nền hồng nhạt */
}
.mcq-error-highlight legend {
  color: #721c24 !important; /* Chữ đỏ cho legend */
}
/* --- Clinical Reasoning Canvas Specific Styles --- */
.canvas-container-flex {
  display: flex;
  height: 100%;
  padding: 0 !important;
}

.tag-list-panel-canvas {
  flex-basis: 280px;
  flex-shrink: 0;
  background-color: #f8f9fa;
  padding: 15px;
  border-right: 1px solid #e0e4e8;
  overflow-y: auto;
  display: flex;
  flex-direction: column; /* Để legend ở trên */
}

.tag-color-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px dashed #ccc;
}
.legend-item {
  font-size: 11px;
  padding: 3px 6px;
  border-radius: 3px;
  color: #333; /* Màu chữ mặc định */
}
/* Cần set màu chữ trắng cho nền tối nếu cần */
.legend-item[style*="#FFD700"], /* Vàng */
.legend-item[style*="#FFA07A"] {
  /* Cam */
  /* Giữ màu chữ đen */
}
.legend-item[style*="#90EE90"] {
  /* Xanh lá nhạt */
  /* Giữ màu chữ đen */
}
.legend-item[style*="#ADD8E6"] {
  /* Xanh dương nhạt */
  /* Giữ màu chữ đen */
}
.legend-item[style*="#DA70D6"] {
  /* Tím */
  color: #fff;
}

#canvasAvailableTagsList {
  list-style: none;
  padding: 0;
  margin: 0;
  flex-grow: 1; /* Chiếm hết không gian còn lại */
  overflow-y: auto; /* Cho phép cuộn nếu nhiều tag */
}
#canvasAvailableTagsList li {
  padding: 8px 12px;
  margin-bottom: 8px;
  border-radius: 5px;
  font-size: 13px;
  cursor: grab;
  border: 1px solid #d1d9e6;
  background-color: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  /* Màu sắc sẽ được JS thêm vào style inline */
}
#canvasAvailableTagsList li:active {
  cursor: grabbing;
}
#canvasAvailableTagsList li:hover {
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}
.canvas-tag-placeholder {
  font-style: italic;
  color: #888;
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
  cursor: default !important;
}

.main-canvas-area-wrapper-flex {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.canvas-toolbar-main {
  padding: 10px 15px;
  background-color: #f1f3f5;
  border-bottom: 1px solid #dee2e6;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}
.btn-canvas-tool {
  padding: 7px 12px;
  font-size: 13px;
  border-radius: 5px;
}
.btn-canvas-tool i {
  margin-right: 5px;
}

/* Khu vực vẽ chính */
.actual-canvas-drawing-area {
  flex-grow: 1;
  background-color: #e9ecef; /* Nền màu xám nhạt */
  background-image: radial-gradient(
    circle,
    #ced4da 0.8px,
    transparent 0.8px
  ); /* Chấm bi */
  background-size: 25px 25px; /* Kích thước lưới chấm */
  position: relative; /* QUAN TRỌNG: Để định vị tuyệt đối các khối bên trong */
  overflow: auto; /* Cho phép cuộn nếu nội dung vượt quá */
  min-height: 400px; /* Chiều cao tối thiểu */
}
.canvas-placeholder-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #aaa;
  text-align: center;
  font-size: 14px;
  user-select: none;
}

/* --- Styles cho các Khối trên Canvas --- */
.canvas-block {
  position: absolute; /* QUAN TRỌNG: Để có thể di chuyển tự do */
  min-width: 150px;
  min-height: 80px;
  border: 1px solid #6c757d;
  background-color: rgba(255, 255, 255, 0.9); /* Nền trắng mờ */
  border-radius: 6px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  padding: 10px;
  cursor: move; /* Con trỏ di chuyển */
  display: flex;
  flex-direction: column; /* Nội dung xếp dọc */
  font-size: 14px;
  overflow: hidden; /* Giấu nội dung tràn */
  user-select: none; /* Chặn chọn text khi kéo */
}
.canvas-block.dragging {
  /* Thêm class khi đang kéo */
  opacity: 0.7;
  cursor: grabbing;
  z-index: 1000; /* Nổi lên trên khi kéo */
}
.canvas-block.selected {
  /* Thêm class khi được chọn (cho việc xóa) */
  border: 2px solid #0d6efd; /* Viền xanh */
}

.block-header {
  font-weight: 600;
  padding-bottom: 5px;
  margin-bottom: 5px;
  border-bottom: 1px solid #eee;
  font-size: 13px;
  color: #333;
  cursor: grab; /* Phần header cũng để kéo */
}
.block-content {
  flex-grow: 1;
  overflow-y: auto; /* Cho phép cuộn nội dung block nếu nhiều */
  padding: 5px 0;
}
.block-content textarea,
.block-content input[type="text"] {
  width: 100%;
  border: 1px dashed #ccc;
  padding: 5px;
  font-size: 13px;
  margin-top: 5px;
  box-sizing: border-box;
  background-color: rgba(255, 255, 255, 0.7);
  resize: vertical;
}
.block-content textarea:focus,
.block-content input[type="text"]:focus {
  background-color: #fff;
  border-style: solid;
  border-color: #86b7fe;
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

/* --- Kiểu riêng cho từng loại Block --- */
.info-block {
  background-color: rgba(230, 247, 255, 0.9); /* Xanh dương nhạt */
  border-color: #91d5ff;
}
.info-block .block-header {
  color: #096dd9;
  border-bottom-color: #bae7ff;
}
.info-block .block-content {
  /* Nơi chứa tags */
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  align-content: flex-start; /* Xếp tag từ trên xuống */
}
.info-block .tag-in-block {
  /* Style cho tag khi nằm trong block */
  padding: 3px 6px;
  border-radius: 4px;
  font-size: 11px;
  border: 1px solid transparent; /* Có thể thêm viền nếu muốn */
  /* Màu nền và chữ sẽ được JS set */
  cursor: default; /* Không kéo tag trong block */
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ddx-block {
  background-color: rgba(255, 242, 230, 0.9); /* Cam nhạt */
  border-color: #ffc069;
}
.ddx-block .block-header {
  color: #d46b08;
  border-bottom-color: #ffd591;
}

.investigation-block {
  background-color: rgba(246, 230, 255, 0.9); /* Tím nhạt */
  border-color: #d3adf7;
}
.investigation-block .block-header {
  color: #722ed1;
  border-bottom-color: #efdbff;
}

.diff-diag-block {
  background-color: rgba(230, 255, 240, 0.9); /* Xanh lá nhạt */
  border-color: #a0d911;
}
.diff-diag-block .block-header {
  color: #52c41a;
  border-bottom-color: #d9f7be;
}

/* --- Style cho Tag khi được thả trực tiếp lên Canvas (MVP ban đầu) --- */
.dropped-tag-on-canvas {
  position: absolute; /* Để định vị */
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  border: 1px solid #aaa;
  cursor: default;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  z-index: 1; /* Dưới các block */
  max-width: 150px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  /* Màu sẽ được JS set */
}

/* CSS cho vùng thả hợp lệ (khi kéo tag vào Info Block) */
.drop-target-active {
  outline: 2px dashed #0d6efd;
  outline-offset: -2px;
  background-color: rgba(13, 110, 253, 0.1);
}
/* --- Clinical Reasoning Canvas - Phần Bổ Sung --- */

/* --- Popups Chung --- */
.canvas-popup {
  position: fixed; /* Hoặc absolute nếu muốn nó trong modal */
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
  z-index: 1060; /* Cao hơn modal chính */
  width: 90%;
  max-width: 500px; /* Giới hạn chiều rộng popup */
  display: none; /* Mặc định ẩn */
  border: 1px solid #ccc;
  flex-direction: column; /* Sắp xếp header, content, footer */
  max-height: 80vh; /* Giới hạn chiều cao */
}
.canvas-popup.small-popup {
  max-width: 350px;
}

.popup-header {
  padding: 12px 20px;
  border-bottom: 1px solid #e9ecef;
  font-size: 16px;
  font-weight: 600;
  color: #343a40;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #f8f9fa;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}
.popup-close-btn {
  background: none;
  border: none;
  font-size: 22px;
  color: #6c757d;
  cursor: pointer;
  padding: 0 5px;
  line-height: 1;
}
.popup-close-btn:hover {
  color: #212529;
}

.popup-content {
  padding: 20px;
  overflow-y: auto; /* Cho phép cuộn nếu nội dung dài */
  max-height: calc(
    80vh - 110px
  ); /* Chiều cao tối đa = max-height popup - header - footer */
}
.popup-content.scrollable {
  /* Dùng class này nếu nội dung chắc chắn cần cuộn */
  /* Có thể thêm style riêng nếu cần */
}
.popup-content p {
  margin-bottom: 10px;
  font-size: 14px;
  color: #495057;
}
.popup-content textarea {
  width: 100%;
  border: 1px solid #ced4da;
  border-radius: 4px;
  padding: 8px 10px;
  font-size: 14px;
  min-height: 80px;
}
.popup-content textarea:focus {
  border-color: #86b7fe;
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.popup-footer {
  padding: 12px 20px;
  border-top: 1px solid #e9ecef;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  background-color: #f8f9fa;
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}

/* --- Popup Chọn Tags --- */
#selectTagsPopup .popup-content {
  padding: 10px; /* Giảm padding cho danh sách tag */
}
.tag-checkbox-item {
  display: flex;
  align-items: center;
  padding: 8px 10px;
  margin-bottom: 5px;
  border-radius: 4px;
  background-color: #f8f9fa;
  border: 1px solid #eee;
  border-left-width: 4px !important; /* Đè CSS border mặc định */
  transition: background-color 0.15s ease-in-out;
}
.tag-checkbox-item:hover {
  background-color: #e9ecef;
}
.tag-checkbox-item input[type="checkbox"] {
  margin-right: 10px;
  flex-shrink: 0;
  cursor: pointer;
}
.tag-checkbox-item label {
  font-size: 13px;
  line-height: 1.4;
  color: #344054;
  cursor: pointer;
  flex-grow: 1;
}

/* --- Context Menu --- */
.canvas-context-menu {
  position: fixed; /* Hoặc absolute nếu muốn trong canvas */
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
  z-index: 1070; /* Trên cả popup? Cần kiểm tra */
  padding: 5px 0;
  display: none; /* Mặc định ẩn */
  min-width: 180px;
}
.canvas-context-menu button {
  display: block;
  width: 100%;
  padding: 8px 15px;
  border: none;
  background: none;
  text-align: left;
  font-size: 14px;
  color: #333;
  cursor: pointer;
}
.canvas-context-menu button:hover {
  background-color: #f0f2ff;
  color: #5b69df;
}

/* --- Arrow Note --- */
.canvas-arrow-note {
  background-color: rgba(255, 255, 153, 0.85); /* Nền vàng nhạt */
  padding: 3px 6px;
  font-size: 11px;
  border: 1px dashed #bba400;
  border-radius: 3px;
  color: #333;
  max-width: 120px; /* Giới hạn chiều rộng note */
  text-align: center;
  white-space: normal; /* Cho phép xuống dòng */
  overflow-wrap: break-word;
}

/* --- Trạng thái Selected --- */
.canvas-block.selected {
  outline: 2px solid #0d6efd; /* Viền xanh dương đậm */
  outline-offset: 2px;
  box-shadow: 0 0 10px rgba(13, 110, 253, 0.5); /* Thêm shadow nhẹ */
}

/* CSS cho line SVG được chọn (nếu muốn) */
#canvasSvgLayer line.selected {
  stroke: #0d6efd; /* Đổi màu đường line */
  stroke-width: 3; /* Dày hơn */
}

/* Nút edit tags trên Info Block */
.edit-tags-btn {
  position: absolute;
  top: 5px;
  right: 5px;
  padding: 2px 5px;
  font-size: 10px;
  line-height: 1;
  border-radius: 3px;
  opacity: 0.7; /* Mờ đi một chút */
  transition: opacity 0.2s;
}
.canvas-block:hover .edit-tags-btn {
  opacity: 1; /* Hiện rõ khi hover vào block */
}

/* --- Điều chỉnh nhỏ khác --- */
/* Đảm bảo con trỏ phù hợp */
.canvas-block .block-header {
  cursor: grab;
}
.canvas-block.dragging,
.canvas-block.dragging .block-header {
  cursor: grabbing;
}
#canvasSvgLayer line {
  cursor: pointer; /* Cho biết mũi tên có thể click */
}
/* --- Popups và Context Menu cho Canvas --- */
.canvas-popup,
.canvas-context-menu {
  position: fixed; /* Hoặc absolute nếu muốn nó scroll cùng canvas */
  background-color: #fff;
  border: 1px solid #ccc;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  border-radius: 6px;
  z-index: 1060; /* Cao hơn modal nhưng dưới các element cao nhất */
  display: none; /* Ẩn ban đầu */
  min-width: 200px;
}

.canvas-context-menu {
  padding: 5px 0;
  display: flex; /* Sửa lại nếu cần */
  flex-direction: column;
}
.canvas-context-menu button {
  display: block;
  width: 100%;
  padding: 8px 15px;
  background: none;
  border: none;
  text-align: left;
  font-size: 14px;
  cursor: pointer;
}
.canvas-context-menu button:hover {
  background-color: #f0f2f5;
}

.canvas-popup .popup-header {
  padding: 10px 15px;
  font-weight: 600;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.canvas-popup .popup-close-btn {
  background: none;
  border: none;
  font-size: 20px;
  color: #888;
  cursor: pointer;
  padding: 0 5px;
}
.canvas-popup .popup-content {
  padding: 15px;
  max-height: 300px; /* Giới hạn chiều cao popup */
}
.canvas-popup .popup-content.scrollable {
  overflow-y: auto;
}
.canvas-popup .popup-footer {
  padding: 10px 15px;
  border-top: 1px solid #eee;
  text-align: right;
}
.canvas-popup .popup-footer .btn {
  margin-left: 5px;
}

.tag-checkbox-item {
  padding: 5px 8px;
  margin-bottom: 5px;
  border-radius: 3px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.tag-checkbox-item:hover {
  background-color: #f8f9fa;
}
.tag-checkbox-item input[type="checkbox"] {
  margin: 0;
}
.tag-checkbox-item label {
  font-size: 13px;
  cursor: pointer;
  flex-grow: 1;
}

.small-popup {
  max-width: 350px;
}
.small-popup textarea {
  width: 100%;
  border: 1px solid #ccc;
  padding: 8px;
  font-size: 14px;
  box-sizing: border-box;
}

/* Style cho mũi tên và note */
.canvas-arrow-note {
  background-color: rgba(255, 255, 180, 0.8); /* Vàng nhạt */
  padding: 2px 5px;
  font-size: 10px;
  border: 1px solid #ddd;
  border-radius: 3px;
  white-space: nowrap;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
}
/* Style cho đường line được chọn */
svg line.selected {
  stroke: #0d6efd;
  stroke-width: 3;
}
.canvas-context-menu {
  position: fixed; /* Hoặc absolute nếu canvas không cuộn toàn trang */
  background-color: #fff;
  border: 1px solid #ccc;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
  border-radius: 4px;
  z-index: 1070; /* Rất cao để nổi trên các element khác */
  display: none; /* Ẩn ban đầu */
  flex-direction: column; /* Các button xếp dọc */
  padding: 5px 0; /* Padding cho menu */
  min-width: 200px; /* Chiều rộng tối thiểu */
}
.canvas-context-menu button {
  display: block;
  width: 100%;
  padding: 8px 15px;
  background: none;
  border: none;
  text-align: left;
  font-size: 14px;
  cursor: pointer;
  color: #333;
  transition: background-color 0.15s ease-in-out;
}
.canvas-context-menu button i {
  margin-right: 8px;
  width: 16px; /* Đảm bảo icon thẳng hàng */
  text-align: center;
}
.canvas-context-menu button:hover {
  background-color: #f0f2f5; /* Màu nền khi hover */
}
/* --- Clinical Reasoning Canvas Styles --- */

/* ... (styles cho canvas-container-flex, tag-list-panel, etc. giữ nguyên) ... */

/* Style cho lớp SVG vẽ mũi tên */
#actualCanvasArea > svg {
  /* Target SVG layer trực tiếp */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; /* Click xuyên qua SVG */
  z-index: 5;
}
#actualCanvasArea > svg line {
  pointer-events: stroke; /* Chỉ bắt sự kiện trên đường line */
  cursor: pointer;
}
#actualCanvasArea > svg line.selected {
  stroke: #0d6efd; /* Màu khi chọn mũi tên */
  stroke-width: 3;
}

/* Label cho Note trên mũi tên */
.canvas-arrow-note {
  position: absolute; /* Định vị tuyệt đối trong canvas area */
  background-color: rgba(255, 255, 224, 0.9); /* Màu vàng nhạt */
  padding: 3px 6px;
  font-size: 11px;
  border: 1px solid #ddd;
  border-radius: 4px;
  white-space: nowrap;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  z-index: 6; /* Nổi trên SVG */
  cursor: pointer;
  user-select: none;
}

/* Khối xét nghiệm 2 trường */
.investigation-block .block-content {
  display: flex;
  flex-direction: column;
  gap: 5px; /* Khoảng cách giữa các thành phần */
}
.canvas-block-label {
  /* Style chung cho label trong block */
  font-size: 0.8em;
  color: #555;
  margin-bottom: 2px;
  font-weight: 500;
}
.investigation-result-display {
  min-height: 30px;
  border: 1px solid #eee;
  padding: 5px;
  font-size: 0.9em;
  background-color: #f8f9fa;
  white-space: pre-wrap; /* Giữ xuống dòng */
  color: #333;
  flex-grow: 1; /* Cho phép giãn ra nếu cần */
}

/* Context Menu */
.canvas-context-menu {
  position: fixed; /* Luôn hiển thị trên cùng */
  background-color: #fff;
  border: 1px solid #ccc;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
  border-radius: 4px;
  z-index: 1070; /* Cao hơn cả modal */
  display: none; /* Ẩn ban đầu */
  flex-direction: column;
  padding: 5px 0;
  min-width: 180px;
}
.canvas-context-menu button {
  display: block;
  width: 100%;
  padding: 8px 15px;
  background: none;
  border: none;
  text-align: left;
  font-size: 14px;
  cursor: pointer;
  color: #333;
}
.canvas-context-menu button:hover {
  background-color: #f0f2f5;
}

/* Popup chung */
.canvas-popup {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ccc;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  z-index: 1080; /* Cao nhất */
  display: none; /* Ẩn ban đầu */
  min-width: 300px;
  max-width: 500px;
}
.canvas-popup.small-popup {
  max-width: 400px;
}

.canvas-popup .popup-header {
  padding: 12px 20px;
  font-weight: 600;
  font-size: 16px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #f8f9fa;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}
.canvas-popup .popup-close-btn {
  /* Style lại nút đóng popup */
  background: none;
  border: none;
  font-size: 24px;
  color: #6c757d;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}
.canvas-popup .popup-close-btn:hover {
  color: #343a40;
}

.canvas-popup .popup-content {
  padding: 20px;
  max-height: 60vh;
}
.canvas-popup .popup-content.scrollable {
  overflow-y: auto;
}
.canvas-popup .popup-footer {
  padding: 12px 20px;
  border-top: 1px solid #eee;
  text-align: right;
  background-color: #f8f9fa;
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}
.canvas-popup .popup-footer .btn {
  margin-left: 8px;
  font-size: 14px;
  padding: 6px 12px;
}

/* Checkbox tags trong popup */
.tag-checkbox-item {
  padding: 6px 8px;
  margin-bottom: 6px;
  border-radius: 3px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-left-width: 4px;
  border-left-style: solid;
  background-color: #fff; /* Nền trắng để dễ nhìn */
  cursor: pointer;
}
.tag-checkbox-item:hover {
  background-color: #f0f2ff;
}
.tag-checkbox-item input[type="checkbox"] {
  margin: 0;
  cursor: pointer;
}
.tag-checkbox-item label {
  font-size: 13px;
  cursor: pointer;
  flex-grow: 1;
  margin: 0;
}

/* Textarea trong popup */
.canvas-popup textarea {
  width: 100%;
  border: 1px solid #ced4da;
  padding: 8px 12px;
  font-size: 14px;
  border-radius: 4px;
  box-sizing: border-box;
  resize: vertical;
}
.canvas-popup textarea:focus {
  border-color: #86b7fe;
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}
.canvas-block-label {
  font-size: 12px;
  color: #555;
  margin-bottom: 3px;
  font-weight: 500;
  display: block; /* Để chiếm 1 dòng */
}
.investigation-result-display.clickable-result {
  cursor: pointer;
  border-style: dashed;
}
.investigation-result-display.clickable-result:hover {
  border-color: #0d6efd;
  background-color: #eef2ff;
}
